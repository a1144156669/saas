{"version":3,"sources":["uni-app:///node_modules/image-tools/index.js","uni-app:///node_modules/wxml2canvas/index.js","uni-app:///node_modules/wxml2canvas/src/index.js","uni-app:///node_modules/wxml2canvas/src/util.js"],"names":["getLocalFilePath","path","indexOf","localFilePath","plus","io","convertAbsoluteFileSystem","substr","dataUrlToBase64","str","array","split","length","index","getNewFileId","Date","now","String","biggerThan","v1","v2","v1Array","v2Array","update","diff","pathToBase64","Promise","resolve","reject","window","FileReader","xhr","XMLHttpRequest","open","responseType","onload","status","fileReader","e","target","result","onerror","readAsDataURL","response","send","canvas","document","createElement","c2x","getContext","img","Image","width","height","drawImage","toDataURL","src","resolveLocalFileSystemURL","entry","file","data","error","wx","canIUse","getFileSystemManager","readFile","filePath","encoding","success","res","fail","Error","base64ToPath","base64","type","match","atob","n","Uint8Array","charCodeAt","URL","webkitURL","createObjectURL","Blob","extName","fileName","basePath","dirPath","os","name","runtime","innerVersion","getDirectory","create","exclusive","getFile","createWriter","writer","onwrite","seek","writeAsBinary","bitmap","nativeObj","Bitmap","loadBase64Data","save","clear","env","USER_DATA_PATH","writeFile","Wxml2Canvas","imageMode","options","device","getSystemInfoSync","zoom","windowWidth","element","object","obj","destZoom","destWidth","destHeight","translateX","translateY","gradientBackground","background","finishDraw","finish","params","errorHandler","progress","textAlign","fullText","font","_init","that","self","fef","_preloadImage","list","then","_draw","catch","text","ctx","measureText","progressPercent","ref","allPic","screenList","asyncList","imgUrl","distance","createCanvasContext","setTextBaseline","setStrokeStyle","debug","platform","_drawBakcground","line","color","style","fill","_drawRectToCanvas","all","count","forEach","item","filter","delay","drawList","results","_saveCanvasToImage","console","log","noDelay","i","attr","_drawCircle","_drawText","_drawLine","_drawRect","_drawWxml","setTimeout","x","y","canvasId","tempFilePath","errcode","errmsg","canvasToTempFilePath","system","url","_findPicIndex","push","local","test","imageInfo","getImageInfo","isBase64","fileManager","replace","downloadFile","findIndex","pic","isImage","isWxml","leftOffset","topOffset","imgWidth","imgHeight","mode","_resetPositionX","_resetPositionY","padding","dataset","_updateProgress","border","boxShadow","_drawBoxShadow","setFillStyle","fillRect","_resetImageByMode","_setFill","_drawBorder","fixBorder","strokeRect","draw","restore","offsetX","offsetY","realHeight","realWidth","_clip","beginPath","rect","clip","closePath","fontSize","_parseNumber","Math","ceil","fontWeight","fontFamily","textWidth","floor","measureWidth","lineHeight","_getLineHeight","textHeight","whiteSpace","Util","transferPadding","_drawTextBackgroud","maxWidth","lineNum","max","singleLength","widthOffset","originX","_getTextSingleLine","currentIndex","endIndex","single","singleWidth","_resetTextPositionX","_resetTextPositionY","fillText","substring","last","lastWidth","lineClamp","rectStyle","r","_drawCircleToCanvas","arc","PI","stroke","x1","y1","x2","y2","_drawLineToCanvas","dash","_setStroke","offset","setLineDash","moveTo","setLineWidth","lineTo","_drawImageToCanvas","_getWxml","sorted","_sortListByTop","Object","keys","_drawWxmlBlock","_drawWxmlInline","limitLeft","left","limitTop","top","topIndex","sort","a","b","sub","resolve2","reject2","_transferWxmlStyle","drawWxmlItem","_drawWxmlText","_drawWxmlImage","_drawWxmlCircleImage","_drawWxmlBackgroundImage","lastTop","p","minLeft","Infinity","maxRight","inlineList","right","position","len","bottom","splice","originLeft","abs","drawRes","_drawWxmlInlineText","maxlength","textData","backgroundColor","imageData","size","backgroundSize","query","createSelectorQuery","in","p1","selectAll","class","fields","computedStyle","formated","_formatImage","exec","p2","limit","select","isNaN","uid","getUid","filename","assign","backgroundImage","number","leftFix","topFix","paddingTop","Number","paddingRight","paddingBottom","paddingLeft","parseInt","borderWidth","blockLineHeightFix","round","callback","transferBorder","transferBoxShadow","setShadow","blur","grd","createLinearGradient","addColorStop","getTextLength","full","c","transferColor","toString","shadow","shift","prefix","random","v"],"mappings":"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","file":"pages/user/common/vendor.js","sourcesContent":["function getLocalFilePath(path) {\n    if (path.indexOf('_www') === 0 || path.indexOf('_doc') === 0 || path.indexOf('_documents') === 0 || path.indexOf('_downloads') === 0) {\n        return path\n    }\n    if (path.indexOf('file://') === 0) {\n        return path\n    }\n    if (path.indexOf('/storage/emulated/0/') === 0) {\n        return path\n    }\n    if (path.indexOf('/') === 0) {\n        var localFilePath = plus.io.convertAbsoluteFileSystem(path)\n        if (localFilePath !== path) {\n            return localFilePath\n        } else {\n            path = path.substr(1)\n        }\n    }\n    return '_www/' + path\n}\n\nfunction dataUrlToBase64(str) {\n    var array = str.split(',')\n    return array[array.length - 1]\n}\n\nvar index = 0\nfunction getNewFileId() {\n    return Date.now() + String(index++)\n}\n\nfunction biggerThan(v1, v2) {\n    var v1Array = v1.split('.')\n    var v2Array = v2.split('.')\n    var update = false\n    for (var index = 0; index < v2Array.length; index++) {\n        var diff = v1Array[index] - v2Array[index]\n        if (diff !== 0) {\n            update = diff > 0\n            break\n        }\n    }\n    return update\n}\n\nexport function pathToBase64(path) {\n    return new Promise(function(resolve, reject) {\n        if (typeof window === 'object' && 'document' in window) {\n            if (typeof FileReader === 'function') {\n                var xhr = new XMLHttpRequest()\n                xhr.open('GET', path, true)\n                xhr.responseType = 'blob'\n                xhr.onload = function() {\n                    if (this.status === 200) {\n                        let fileReader = new FileReader()\n                        fileReader.onload = function(e) {\n                            resolve(e.target.result)\n                        }\n                        fileReader.onerror = reject\n                        fileReader.readAsDataURL(this.response)\n                    }\n                }\n                xhr.onerror = reject\n                xhr.send()\n                return\n            }\n            var canvas = document.createElement('canvas')\n            var c2x = canvas.getContext('2d')\n            var img = new Image\n            img.onload = function() {\n                canvas.width = img.width\n                canvas.height = img.height\n                c2x.drawImage(img, 0, 0)\n                resolve(canvas.toDataURL())\n                canvas.height = canvas.width = 0\n            }\n            img.onerror = reject\n            img.src = path\n            return\n        }\n        if (typeof plus === 'object') {\n            plus.io.resolveLocalFileSystemURL(getLocalFilePath(path), function(entry) {\n                entry.file(function(file) {\n                    var fileReader = new plus.io.FileReader()\n                    fileReader.onload = function(data) {\n                        resolve(data.target.result)\n                    }\n                    fileReader.onerror = function(error) {\n                        reject(error)\n                    }\n                    fileReader.readAsDataURL(file)\n                }, function(error) {\n                    reject(error)\n                })\n            }, function(error) {\n                reject(error)\n            })\n            return\n        }\n        if (typeof wx === 'object' && wx.canIUse('getFileSystemManager')) {\n            wx.getFileSystemManager().readFile({\n                filePath: path,\n                encoding: 'base64',\n                success: function(res) {\n                    resolve('data:image/png;base64,' + res.data)\n                },\n                fail: function(error) {\n                    reject(error)\n                }\n            })\n            return\n        }\n        reject(new Error('not support'))\n    })\n}\n\nexport function base64ToPath(base64) {\n    return new Promise(function(resolve, reject) {\n        if (typeof window === 'object' && 'document' in window) {\n            base64 = base64.split(',')\n            var type = base64[0].match(/:(.*?);/)[1]\n            var str = atob(base64[1])\n            var n = str.length\n            var array = new Uint8Array(n)\n            while (n--) {\n                array[n] = str.charCodeAt(n)\n            }\n            return resolve((window.URL || window.webkitURL).createObjectURL(new Blob([array], { type: type })))\n        }\n        var extName = base64.split(',')[0].match(/data\\:\\S+\\/(\\S+);/)\n        if (extName) {\n            extName = extName[1]\n        } else {\n            reject(new Error('base64 error'))\n        }\n        var fileName = getNewFileId() + '.' + extName\n        if (typeof plus === 'object') {\n            var basePath = '_doc'\n            var dirPath = 'uniapp_temp'\n            var filePath = basePath + '/' + dirPath + '/' + fileName\n            if (!biggerThan(plus.os.name === 'Android' ? '1.9.9.80627' : '1.9.9.80472', plus.runtime.innerVersion)) {\n                plus.io.resolveLocalFileSystemURL(basePath, function(entry) {\n                    entry.getDirectory(dirPath, {\n                        create: true,\n                        exclusive: false,\n                    }, function(entry) {\n                        entry.getFile(fileName, {\n                            create: true,\n                            exclusive: false,\n                        }, function(entry) {\n                            entry.createWriter(function(writer) {\n                                writer.onwrite = function() {\n                                    resolve(filePath)\n                                }\n                                writer.onerror = reject\n                                writer.seek(0)\n                                writer.writeAsBinary(dataUrlToBase64(base64))\n                            }, reject)\n                        }, reject)\n                    }, reject)\n                }, reject)\n                return\n            }\n            var bitmap = new plus.nativeObj.Bitmap(fileName)\n            bitmap.loadBase64Data(base64, function() {\n                bitmap.save(filePath, {}, function() {\n                    bitmap.clear()\n                    resolve(filePath)\n                }, function(error) {\n                    bitmap.clear()\n                    reject(error)\n                })\n            }, function(error) {\n                bitmap.clear()\n                reject(error)\n            })\n            return\n        }\n        if (typeof wx === 'object' && wx.canIUse('getFileSystemManager')) {\n            var filePath = wx.env.USER_DATA_PATH + '/' + fileName\n            wx.getFileSystemManager().writeFile({\n                filePath: filePath,\n                data: dataUrlToBase64(base64),\n                encoding: 'base64',\n                success: function() {\n                    resolve(filePath)\n                },\n                fail: function(error) {\n                    reject(error)\n                }\n            })\n            return\n        }\n        reject(new Error('not support'))\n    })\n}","import Wxml2Canvas from './src/index';\n\nexport default Wxml2Canvas;","import Util from './util';\n\nconst imageMode = ['scaleToFill', 'aspectFit', 'aspectFill', 'widthFix', 'top', 'bottom', 'center', 'left', 'right', 'top left', 'top right', 'bottom left', 'bottom right']\n\nclass Wxml2Canvas {\n    constructor (options = {}) {\n        this.device = wx.getSystemInfoSync && wx.getSystemInfoSync() || {};\n        \n        if (!options.zoom) {\n            this.zoom = this.device.windowWidth / 375;\n        } else {\n            this.zoom = options.zoom || 1;\n        }   \n        \n        this.element = options.element;\n        this.object = options.obj;\n        this.width = options.width * this.zoom || 0;\n        this.height = options.height * this.zoom || 0;\n        this.destZoom = options.destZoom || 3;\n        this.destWidth = this.width * this.destZoom;\n        this.destHeight = this.height * this.destZoom;\n        this.translateX = options.translateX * this.zoom || 0;\n        this.translateY = options.translateY * this.zoom || 0;\n        this.gradientBackground = options.gradientBackground || null;\n        this.background = options.background || '#ffffff';\n        this.finishDraw = options.finish || function finish(params) {}\n        this.errorHandler = options.error || function error(params) {}\n        this.progress = options.progress || function progress(params) {}\n        this.textAlign = options.textAlign || 'left';\n        this.fullText = options.fullText || false;\n        this.font = options.font || '14px PingFang SC';\n\n        this._init();\n    }\n\n    draw (data = {}, that) {\n        let self = this;\n        this.data = data;\n        this.fef = that;\n\n        this.progress(10);\n        this._preloadImage(data.list).then((result) => {\n            this.progress(30);\n            self._draw();\n        }).catch((res) => {\n            self.errorHandler(res);\n        })\n    }\n\n    measureWidth (text, font) {\n        if(font) {\n            this.ctx.font = font;\n        }\n        let res = this.ctx.measureText(text) || {};\n        return res.width || 0;\n    }\n\n    _init () {\n        this.progressPercent = 0;   // \n        this.data = null;\n        this.ref = null;\n        this.allPic = [];\n        this.screenList = []; \n        this.asyncList = [];\n        this.imgUrl = '';\n        this.progressPercent = 0;\n        this.distance = 0;\n        this.progress(0);\n\n        this.ctx = wx.createCanvasContext(this.element, this.obj);\n        this.ctx.font = this.font;\n        this.ctx.setTextBaseline('top');\n        this.ctx.setStrokeStyle('white');\n\n        this.debug = this.device.platform === 'devtools' ? true : false;\n\n        this._drawBakcground();\n    }\n\n    _drawBakcground () {\n        if (this.gradientBackground) {\n            let line = this.gradientBackground.line || [0, 0, 0, this.height];\n            let color = this.gradientBackground.color || ['#fff', '#fff'];\n            let style = { fill: { line, color } }\n            this._drawRectToCanvas(0, 0, this.width, this.height, style);\n        } else {\n            let style = { fill: this.background }\n            this._drawRectToCanvas(0, 0, this.width, this.height, style);\n        }\n    }\n\n    _draw () {\n        let self = this;\n        let list = this.data.list || [];\n        let index = 0;\n        let all = [];\n        let count = 0;\n\n        list.forEach(item => {\n            if(item.type === 'wxml') {\n                count += 3;\n            } else {\n                count += 1;\n            }\n        })\n\n        this.distance = 60 / (count || 1); // \n        this.progressPercent = 30;\n        this.asyncList = list.filter( item => item.delay == true );\n        list = list.filter( item => item.delay != true );\n        drawList(list);\n\n        Promise.all(all).then(results => {\n            index = 0;\n            drawList(self.asyncList, true);\n\n            Promise.all(all).then(results => {\n                self.progress(90);\n                self._saveCanvasToImage();\n            });\n        }).catch (e => {\n            console.log(e)\n            self.errorHandler(e);\n        });\n\n        function drawList(list = [], noDelay) {\n            list.forEach((item, i) => {\n                all[index++] = new Promise((resolve, reject) => {\n                    let attr = item.style;\n                    item.progress = self.distance;\n                    if (noDelay) {\n                        item.delay = 0;\n                    }\n                    if (item.type === 'radius-image') {\n                        self._drawCircle(item, attr, resolve, reject, 'image');\n                    } else if (item.type === 'text') {\n                        self._drawText(item, attr, resolve, reject);\n                    } else if (item.type === 'line') {\n                        self._drawLine(item, attr, resolve, reject);\n                    } else if (item.type === 'circle') {\n                        self._drawCircle(item, attr, resolve, reject);\n                    } else if (item.type === 'rect') {\n                        self._drawRect(item, attr, resolve, reject);\n                    } else if (item.type === 'image') {\n                        self._drawRect(item, attr, resolve, reject, 'image');\n                    } else if (item.type === 'wxml') {\n                        self._drawWxml(item, attr, resolve, reject);\n                    }else {\n                        resolve();\n                    }\n                });\n            });\n        }\n    }\n\n    _saveCanvasToImage () {\n        let self = this;       \n\n        // delay\n        setTimeout(() => {\n            self.progress(95);\n\n            let obj = {\n                x: 0,\n                y: 0,\n                width: self.width,\n                height: self.height,\n                canvasId: self.element,\n                success: function (res) {\n\n                    self.progress(100);\n                    self.imgUrl = res.tempFilePath;\n                    self.finishDraw(self.imgUrl);\n                },\n                fail: function (res) {\n\n                    self.errorHandler({errcode: 1000, errmsg: 'save canvas error', e: res});\n                }\n            }\n\n            if(self.destZoom !== 3) {\n                obj.destWidth = self.destWidth;\n                obj.destHeight = self.destHeight;\n            }\n\n            wx.canvasToTempFilePath(obj, self.object);\n        }, self.device.system.indexOf('iOS') === -1 ? 300 : 100);\n    }\n\n    _preloadImage (list = []) {\n        let self = this;\n        let all = [];\n        let count = 0;\n\n        list.forEach((item, i) => {\n            if (item.url && self._findPicIndex(item.url) === -1) {\n                \n                // \n                self.allPic.push({\n                    url: item.url,\n                    local: ''\n                });\n                all[count++] = new Promise((resolve, reject) => {\n                    // http(s)\n                    if (!/^http/.test(item.url) || /^http:\\/\\/(tmp)|(usr)\\//.test(item.url) || /^http:\\/\\/127\\.0\\.0\\.1/.test(item.url)) {\n                        if(item.isBase64) {\n                            let fileManager = wx.getFileSystemManager();\n\n                            fileManager.writeFile({\n                                filePath: item.url,\n                                data: item.isBase64.replace(/data:image\\/(.*);base64,/, ''),\n                                encoding: 'base64',\n                                success (res) {\n                                    imageInfo(item.url);\n                                },\n                                fail (res) {\n                                    reject(res);\n                                },\n                            })\n                            \n                        }else {\n                            imageInfo(item.url);\n                        }\n\n                        function imageInfo (url) {\n                            wx.getImageInfo({\n                                src: url,\n                                success (res) {\n                                    let index = self._findPicIndex(url);\n                                    if(index > -1) {\n                                        self.allPic[index].local = url;\n                                        self.allPic[index].width = res.width;\n                                        self.allPic[index].height = res.height;\n                                    }\n                                    resolve({ tempFilePath: url });\n                                }, \n                                fail (res) {\n                                    reject(res);\n                                }\n                            })\n                        }\n                    } else {\n                        wx.downloadFile({\n                            url: item.url.replace(/^https?/, 'https'),\n                            success: function (res) {\n                                wx.getImageInfo({\n                                    src: res.tempFilePath,\n                                    success (img) {\n                                        let index = self._findPicIndex(item.url);\n                                        if (index > -1) {\n                                            self.allPic[index].local = res.tempFilePath;\n                                            self.allPic[index].width = img.width;\n                                            self.allPic[index].height = img.height;\n                                        }\n                                        resolve(res);\n                                    },\n                                    fail (res) {\n                                        reject(res);\n                                    }\n                                })\n                            },\n                            fail: (res) => {\n                                reject({errcode: 1001, errmsg: 'download pic error'});\n                            }\n                        })\n                    }\n                }) \n            }\n        });\n\n        return Promise.all(all).then(results => {\n            return new Promise(resolve => { resolve() })\n        }).catch((results) => {\n            return new Promise((resolve, reject) => { reject(results) })\n        })\n    }\n\n    _findPicIndex (url) {\n        let index = this.allPic.findIndex(pic => pic.url === url);\n        return index;\n    }\n\n    _drawRect (item, style, resolve, reject, isImage, isWxml) {\n        let zoom = this.zoom;\n        let leftOffset = 0;\n        let topOffset = 0;\n        let width = style.width;\n        let height = style.height;\n        let imgWidth = style.width;\n        let imgHeight = style.height;\n        let mode = null;\n\n        try {\n            item.x = this._resetPositionX(item, style);\n            item.y = this._resetPositionY(item, style);\n            \n            let url;\n            if(isImage) {\n                let index = this._findPicIndex(item.url);\n                if(index > -1) {\n                    url = this.allPic[index].local\n                    imgWidth = this.allPic[index].width\n                    imgHeight = this.allPic[index].height\n                }else {\n                    url = item.url;\n                }\n            }\n\n            style.padding = style.padding || [];\n            if(isWxml === 'inline-wxml') {\n                item.x = item.x + (style.padding[3] && style.padding[3] || 0)\n                item.y = item.y + (style.padding[0] && style.padding[0] || 0)\n            }\n\n            leftOffset = item.x + style.width + (style.padding[1] && style.padding[1] || 0);\n\n            if(!isWxml) {\n                width = width * zoom;\n                height = height * zoom;\n            }\n\n            if(style.dataset && style.dataset.mode && imageMode.indexOf(style.dataset.mode) > -1) {\n                mode = {\n                    type: style.dataset.mode,\n                    width: imgWidth,\n                    height: imgHeight\n                };\n            }\n\n            this._drawRectToCanvas(item.x, item.y, width, height, style, url, mode);\n            this._updateProgress(item.progress);\n\n            if(resolve) {\n                resolve();\n            }else {\n                return {\n                    leftOffset,\n                    topOffset\n                }\n            }\n        } catch (e) {\n            reject && reject({ errcode: (isImage ? 1003 : 1002), errmsg: (isImage ? 'drawImage error' : 'drawRect error'), e });\n        }\n    }\n\n    _drawRectToCanvas (x, y, width, height, style, url, mode) {\n        let { fill, border, boxShadow } = style;\n        this.ctx.save();\n        this._drawBoxShadow(boxShadow, (res) => {\n            // \n            if(fill && typeof fill !== 'string' && !this.debug) {\n                this.ctx.setFillStyle(res.color || '#ffffff');\n                this.ctx.fillRect(x, y, width, height);\n            }\n        });\n        \n        if(url) {\n            // bug\n            if(mode) {\n                this._resetImageByMode(url, x, y, width, height, mode);\n            }else {\n                this.ctx.drawImage(url, x, y, width, height)\n            }\n        }else {\n            this._setFill(fill, () => {\n                this.ctx.fillRect(x, y, width, height);\n            });\n        }\n\n        this._drawBorder(border, style, (border) => {\n            let fixBorder = border.width;\n            this.ctx.strokeRect(x - fixBorder / 2, y - fixBorder / 2, width + fixBorder, height + fixBorder);\n        });\n\n        this.ctx.draw(true);\n        this.ctx.restore();\n    }\n\n    _resetImageByMode (url, x, y, width, height, mode) {\n        let self = this;\n        let offsetX = 0;\n        let offsetY = 0;\n        let imgWidth = mode.width;\n        let imgHeight = mode.height;\n\n        switch (mode.type) {\n            case 'scaleToFill': \n                imgWidth = width;\n                imgHeight = height;\n                self.ctx.drawImage(url, x, y, width, height)\n                break;\n            case 'widthFix': \n                height = width / ((imgWidth || 1) / (imgHeight || 1))\n                self.ctx.drawImage(url, x, y, width, height)\n                break; \n            case 'aspectFit': \n                if(imgWidth > imgHeight) {\n                    let realHeight = width / ((imgWidth || 1) / (imgHeight || 1))\n                    offsetY = -(height - realHeight) / 2\n                    imgWidth = width;\n                    imgHeight = realHeight;\n                }else {\n                    let realWidth = height / ((imgHeight || 1) / (imgWidth || 1))\n                    offsetX = -(width - realWidth) / 2\n                    imgWidth = realWidth;\n                    imgHeight = height;\n                }\n\n                _clip();\n                break;\n            case 'aspectFill': \n                if(imgWidth > imgHeight) {\n                    let realWidth = imgWidth / ((imgHeight || 1) / (height || 1))\n                    offsetX = (realWidth - width) / 2\n                    imgWidth = realWidth;\n                    imgHeight = height;\n                }else {\n                    let realHeight = imgHeight / ((imgWidth || 1) / (width || 1))\n                    offsetY = (realHeight - height) / 2\n                    imgWidth = width;\n                    imgHeight = realHeight;\n                }\n\n                _clip();\n                break;\n            case 'top left': \n                _clip();\n                break;\n            case 'top': \n                offsetX = (mode.width - width) / 2;\n                _clip();\n                break;\n            case 'top right': \n                offsetX = (mode.width - width);\n                _clip();\n                break;\n            case 'left': \n                offsetY = (mode.height - height) / 2;\n                _clip();\n                break;\n            case 'center': \n                offsetX = (mode.width - width) / 2;\n                offsetY = (mode.height - height) / 2;\n                _clip();\n                break;\n            case 'right': \n                offsetX = (mode.width - width);\n                offsetY = (mode.height - height) / 2;\n                _clip();\n                break;\n            case 'bottom left': \n                offsetY = (mode.height - height)\n                _clip();\n                break;\n            case 'bottom': \n                offsetX = (mode.width - width) / 2;\n                offsetY = (mode.height - height)\n                _clip();\n                break;\n            case 'bottom right': \n                offsetX = (mode.width - width);\n                offsetY = (mode.height - height)\n                _clip();\n                break;\n            default: \n                imgWidth = width;\n                imgHeight = height;\n                break;  \n        }\n\n        function _clip () {\n            self.ctx.save();\n            self.ctx.beginPath()\n            self.ctx.rect(x, y, width, height)\n            self.ctx.clip();\n            self.ctx.drawImage(url, x - offsetX, y - offsetY, imgWidth, imgHeight)\n            self.ctx.closePath();\n            self.ctx.restore();\n        }\n    }\n\n    _drawText (item, style, resolve, reject, type, isWxml) {\n        let zoom = this.zoom;\n        let leftOffset = 0;\n        let topOffset = 0;\n\n        try {\n            style.fontSize = this._parseNumber(style.fontSize);\n            let fontSize = Math.ceil((style.fontSize || 14) * zoom)\n            this.ctx.setTextBaseline('top');\n            this.ctx.font = (`${style.fontWeight ? (style.fontWeight) : 'normal'} ${ fontSize }px ${ style.fontFamily || 'PingFang SC' }`);\n            this.ctx.setFillStyle(style.color || '#454545');\n\n            let text = item.text || '';\n            let textWidth = Math.floor(this.measureWidth(text, style.font || this.ctx.font));\n            let lineHeight = this._getLineHeight(style);\n            let textHeight = Math.ceil(textWidth / (style.width || textWidth)) * lineHeight;\n            let width = Math.ceil((style.width || textWidth) * (!isWxml ? zoom : 1));\n            let whiteSpace = style.whiteSpace || 'wrap';\n            let x = 0;\n            let y = 0;                \n\n            if(typeof style.padding === 'string') {\n                style.padding = Util.transferPadding(style.padding);\n            }\n            item.x = this._resetPositionX(item, style);\n            item.y = this._resetPositionY(item, style, textHeight);\n            this._drawBoxShadow(style.boxShadow);\n\n            if(style.background || style.border) {\n                this._drawTextBackgroud(item, style, textWidth, textHeight, isWxml);\n            }\n            \n            // \n            if(type === 'inline-text') {\n                width = item.maxWidth;\n                if(item.leftOffset + textWidth > width) {\n                    // \n                    let lineNum = Math.max(Math.floor(textWidth / width), 1);\n                    let length = text.length;\n                    let singleLength = Math.floor(length / lineNum);\n                    let widthOffset = item.leftOffset ? item.leftOffset - item.originX : 0;\n                    let { endIndex: currentIndex, single, singleWidth } = this._getTextSingleLine(text, width, singleLength, 0, widthOffset)\n                    x = this._resetTextPositionX(item, style, singleWidth);\n                    y = this._resetTextPositionY(item, style);\n                    this.ctx.fillText(single, x, y);\n                    leftOffset = x + singleWidth;\n                    topOffset = y;\n\n                    // \n                    text = text.substring(currentIndex, text.length);\n                    currentIndex = 0;\n                    lineNum = Math.max(Math.floor(textWidth / width), 1);\n                    textWidth = Math.floor(this.measureWidth(text, style.font || this.ctx.font));\n                    item.x = item.originX; // x\n                    for (let i = 0; i < lineNum; i++) {\n                        let { endIndex, single, singleWidth } = this._getTextSingleLine(text, width, singleLength, currentIndex);\n                        currentIndex = endIndex;\n                        if(single) {\n                            x = this._resetTextPositionX(item, style, singleWidth, width);\n                            y = this._resetTextPositionY(item, style, i + 1);\n                            this.ctx.fillText(single, x, y);\n                            if(i === lineNum - 1) {\n                                leftOffset = x + singleWidth;\n                                topOffset = lineHeight * lineNum;\n                            }\n                        }\n                    }\n\n                    let last = text.substring(currentIndex, length);\n                    let lastWidth = this.measureWidth(last);\n\n                    if(last) {\n                        x = this._resetTextPositionX(item, style, lastWidth, width);\n                        y = this._resetTextPositionY(item, style, lineNum + 1);\n                        this.ctx.fillText(last, x, y);\n                        leftOffset = x + lastWidth;\n                        topOffset = lineHeight * (lineNum + 1);\n                    }\n                }else {\n                    x = this._resetTextPositionX(item, style, textWidth, width);\n                    y = this._resetTextPositionY(item, style);\n                    this.ctx.fillText(item.text, x, y);\n                    leftOffset = x + textWidth;\n                    topOffset = lineHeight;\n                }\n            }else {\n                // block\n                if (width && textWidth > width && whiteSpace !== 'nowrap') {\n                    let lineNum = Math.max(Math.floor(textWidth / width), 1);\n                    let length = text.length;\n                    let singleLength = Math.floor(length / lineNum);\n                    let currentIndex = 0;\n\n                    // lineClamp\n                    if (style.lineClamp && lineNum + 1 > style.lineClamp) {\n                        lineNum = style.lineClamp - 1;\n                    }\n\n                    for (let i = 0; i < lineNum; i++) {\n                        let { endIndex, single, singleWidth } = this._getTextSingleLine(text, width, singleLength, currentIndex);\n                        currentIndex = endIndex;\n                        x = this._resetTextPositionX(item, style, singleWidth, width);\n                        y = this._resetTextPositionY(item, style, i);\n                        this.ctx.fillText(single, x, y);\n\n                    }\n\n                    // \n                    let last = text.substring(currentIndex, length);\n                    let lastWidth = this.measureWidth(last);\n                    if(lastWidth > width) {\n                        let { single, singleWidth } = this._getTextSingleLine(last, width, singleLength);\n                        lastWidth = singleWidth;\n                        last = single.substring(0, single.length - 1) + '...';\n                    }\n\n                    x = this._resetTextPositionX(item, style, lastWidth, width);\n                    y = this._resetTextPositionY(item, style, lineNum);\n                    this.ctx.fillText(last, x, y);\n\n                }else {\n                    x = this._resetTextPositionX(item, style, textWidth, width);\n                    y = this._resetTextPositionY(item, style);\n                    this.ctx.fillText(item.text, x, y);\n                }\n            }\n            \n            this.ctx.draw(true);\n            \n            this._updateProgress(item.progress);\n\n            if(resolve) {\n                resolve();\n            }else {\n                return {\n                    leftOffset,\n                    topOffset\n                }\n            }\n        } catch(e) {\n            reject && reject({ errcode: 1004, errmsg: 'drawText error', e: e });\n        }\n    }\n\n    _drawTextBackgroud (item, style, textWidth, textHeight, isWxml) {\n        if(!style.width) return;\n        let zoom = isWxml ? 1 : this.zoom;\n        let width = style.width || textWidth;\n        let height = style.height || textHeight;\n        let rectStyle = {\n            fill: style.background,\n            border: style.border\n        }\n        style.padding = style.padding || [0, 0, 0, 0];\n        width += (style.padding[1] || 0) + (style.padding[3] || 0);\n        height += (style.padding[0] || 0) + (style.padding[2] || 0);\n        width = width * zoom\n        height = height * zoom\n        this._drawRectToCanvas(item.x, item.y, width, height, rectStyle);\n    }\n\n    _drawCircle (item, style, resolve, reject, isImage, isWxml) {\n        let zoom = this.zoom;\n        let r = style.r;\n        try {\n            \n            item.x = this._resetPositionX(item, style);\n            item.y = this._resetPositionY(item, style);\n\n            let url;\n            if(isImage) {\n              let index = this._findPicIndex(item.url);\n              if (index > -1) {\n                url = this.allPic[index].local;\n              } else {\n                url = item.url;\n              }\n            }\n\n            if(!isWxml) {\n                r = r * zoom;\n            }\n\n            this._drawCircleToCanvas(item.x, item.y, r, style, url);\n            \n            this._updateProgress(item.progress);\n            resolve && resolve();\n        } catch (e) {\n            reject && reject({ errcode: (isImage ? 1006 : 1005), errmsg: (isImage ? 'drawCircleImage error' : 'drawCircle error'), e });\n        }\n    }\n\n    _drawCircleToCanvas (x, y, r, style, url) {\n        let { fill, border, boxShadow } = style;\n\n        this.ctx.save();\n\n        this._drawBoxShadow(boxShadow, (res) => {\n            // \n            if((fill && typeof fill !== 'string') || (url && res.color)) {\n                this.ctx.setFillStyle(res.color || '#ffffff');\n                this.ctx.beginPath();\n                this.ctx.arc(x + r, y + r, r, 0, 2 * Math.PI);\n                this.ctx.closePath();\n                this.ctx.fill();\n            }\n        });\n\n        if(url) {\n            this.ctx.save();\n            this.ctx.beginPath();\n            this.ctx.arc(x + r, y + r, r, 0, 2 * Math.PI);\n            this.ctx.clip();\n            this.ctx.drawImage(url, x, y, r * 2, r * 2);\n            this.ctx.closePath();\n            this.ctx.restore();\n        }else {\n            this._setFill(fill, () => {\n                this.ctx.beginPath();\n                this.ctx.arc(x + r, y + r, r, 0, 2 * Math.PI);\n                this.ctx.closePath();\n                this.ctx.fill();\n            });\n        }\n\n        this._drawBorder(border, style, (border) => {\n            this.ctx.beginPath()\n            this.ctx.arc(x + r, y + r, r + border.width / 2, 0, 2 * Math.PI)\n            this.ctx.stroke()\n            this.ctx.closePath();\n        });\n\n        this.ctx.draw(true);\n        this.ctx.restore();\n    }\n\n    _drawLine (item, style, resolve, reject, isWxml) {\n        let zoom = this.zoom;\n        try {\n            let x1 = item.x * zoom + this.translateX;\n            let y1 = item.y * zoom + this.translateY;\n            let x2 = item.x2 * zoom + this.translateX;\n            let y2 = item.y2 * zoom + this.translateY;\n            this._drawLineToCanvas(x1, y1, x2, y2, style);\n\n            this._updateProgress(item.progress);\n            resolve && resolve();\n        } catch (e) {\n            reject && reject({ errcode: 1007, errmsg: 'drawLine error', e });\n        }\n    }\n\n    _drawLineToCanvas (x1, y1, x2, y2, style) {\n        let { stroke, dash, boxShadow } = style;\n\n        this.ctx.save();\n        if(stroke) {\n            this._setStroke(stroke);\n        }\n\n        this._drawBoxShadow(boxShadow);\n\n        if(dash) {\n            let dash = [style.dash[0] || 5, style.dash[1] || 5];\n            let offset = style.dash[2] || 0;\n            this.ctx.setLineDash(dash, offset || 0);\n        }\n\n        this.ctx.moveTo(x1, y1);\n        this.ctx.setLineWidth((style.width || 1) * this.zoom);\n        this.ctx.lineTo(x2, y2);\n        this.ctx.stroke();\n        this.ctx.draw(true);\n        this.ctx.restore();\n    }\n\n    // _drawRect\n    _drawImage (item, style, resolve, reject, isWxml) {\n        let zoom = this.zoom;\n        try {\n            \n            item.x = this._resetPositionX(item, style);\n            item.y = this._resetPositionY(item, style);\n            item.x = item.x + (style.padding[3] || 0);\n            item.y = item.y + (style.padding[0] || 0);\n\n            let index = this._findPicIndex(item.url);\n            let url = index > -1 ? this.allPic[index].local : item.url;\n            this._drawImageToCanvas(url, item.x, item.y, style.width * zoom, style.height * zoom, style);\n\n            this._updateProgress(item.progress);\n            resolve && resolve();\n        } catch (e) {\n            reject && reject({ errcode: 1012, errmsg: 'drawRect error', e });\n        }\n    }\n\n    // _drawRect\n    _drawImageToCanvas (url, x, y, width, height, style) {\n        let { fill, border, boxShadow } = style;\n        this.ctx.save();\n\n        this._drawBoxShadow(boxShadow);\n        this.ctx.drawImage(url, x, y, width, height);\n\n        this._drawBorder(border, style, (border) => {\n            let fixBorder = border.width;\n            this.ctx.strokeRect(x - fixBorder / 2, y - fixBorder / 2, width + fixBorder, height + fixBorder);\n        });\n        this.ctx.draw(true);\n        this.ctx.restore();\n    }\n\n    _drawWxml (item, style, resolve, reject) {\n        let self = this;\n        let all = [];\n        try {\n            this._getWxml(item, style).then((results) => {\n                \n                //  -> \n                let sorted = self._sortListByTop(results[0]);\n                let count = 0;\n                let progress = 0;\n                Object.keys(sorted).forEach(item => {\n                    count += sorted[item].length;\n                })\n                progress = this.distance * 3 / (count || 1);\n\n                all = this._drawWxmlBlock(item, sorted, all, progress, results[1]);\n                all = this._drawWxmlInline(item, sorted, all, progress, results[1]);\n\n                Promise.all(all).then(results => {\n                    resolve && resolve();\n                }).catch (e => {\n                    reject && reject(e);\n                });\n            });\n        } catch (e) {\n            reject && reject({ errcode: 1008, errmsg: 'drawWxml error' });\n        }\n    }\n\n    _drawWxmlBlock (item, sorted, all, progress, results) {\n        let self = this;\n        // \n        let limitLeft = (results ? results.left : 0);\n        let limitTop = (results ? results.top : 0);\n        Object.keys(sorted).forEach((top, topIndex) => {\n            //  -> \n            let list = sorted[top].sort((a, b) => {\n                return (a.left - b.left);\n            });\n\n            list = list.filter(sub => sub.dataset.type && sub.dataset.type.indexOf('inline') === -1);\n\n            list.forEach((sub, index) => {\n                all[index] = new Promise((resolve2, reject2) => {\n                    sub = self._transferWxmlStyle(sub, item, limitLeft, limitTop);\n                    sub.progress = progress;\n                    let type = sub.dataset.type;\n                    if(sub.dataset.delay) {\n                        setTimeout(() => {\n                            drawWxmlItem();\n                        }, sub.dataset.delay)\n                    } else {\n                        drawWxmlItem();\n                    }\n                    function drawWxmlItem () {\n                        if (type === 'text') {\n                            self._drawWxmlText(sub, resolve2, reject2);\n                        } else if (type === 'image') {\n                            self._drawWxmlImage(sub, resolve2, reject2);\n                        } else if (type === 'radius-image') {\n                            self._drawWxmlCircleImage(sub, resolve2, reject2);\n                        } else if (type === 'background-image') {\n                            self._drawWxmlBackgroundImage(sub, resolve2, reject2);\n                        }\n                    }\n                });\n            });\n        });\n\n        return all;\n\n    }\n\n    _drawWxmlInline (item, sorted, all, progress, results) {\n        let self = this;\n        let topOffset = 0;\n        let leftOffset = 0;\n        let lastTop = 0;\n        let limitLeft = (results ? results.left : 0);\n        let limitTop = (results ? results.top : 0);\n        let p = new Promise((resolve2, reject2) => {\n            let maxWidth = 0;\n            let minLeft = Infinity;\n            let maxRight = 0;\n\n            // topleftright\n            Object.keys(sorted).forEach(top => {\n                let inlineList = sorted[top].filter(sub => sub.dataset.type && sub.dataset.type.indexOf('inline') > -1);\n                inlineList.forEach(sub => {\n                        if(sub.left < minLeft) {\n                        minLeft = sub.left\n                    }\n                    if(sub.right > maxRight) {\n                        maxRight = sub.right;\n                    }\n                })\n            });\n            maxWidth = Math.ceil((maxRight - minLeft) || self.width);\n\n            Object.keys(sorted).forEach((top, topIndex) => {\n                //  -> \n                let list = sorted[top].sort((a, b) => {\n                    return (a.left - b.left);\n                });\n\n                // leftversion2.0.6bottom\n                let position = -1;\n                for(let i = 0, len = list.length; i < len; i++) {\n                    if(list[i] && list[i + 1]) {\n                        if(list[i].bottom > list[i + 1].bottom) {\n                            position = i;\n                            break;\n                        }\n                    }\n                }\n\n                if(position > -1) {\n                    list.push(list.splice(position, 1)[0]);\n                }\n\n                let inlineList = list.filter(sub => sub.dataset.type && sub.dataset.type.indexOf('inline') > -1);\n                let originLeft = (inlineList[0] ? inlineList[0].left : 0);\n                // top; \n                if (Math.abs(topOffset + lastTop - top) > 2 || leftOffset - originLeft - limitLeft >= maxWidth || leftOffset <= originLeft - limitLeft - 2) {\n                    leftOffset = 0;\n                }\n\n                lastTop = +top;\n                topOffset = 0;\n                \n                inlineList.forEach((sub, index) => {\n                    sub = self._transferWxmlStyle(sub, item, limitLeft, limitTop);\n                    sub.progress = progress;\n                    let type = sub.dataset.type;\n                    if (type === 'inline-text') {\n                        let drawRes = self._drawWxmlInlineText(sub, leftOffset, maxWidth);\n                        leftOffset = drawRes.leftOffset;\n                        topOffset = drawRes.topOffset;\n                    } else if (type === 'inline-image') {\n                        let drawRes = self._drawWxmlImage(sub) || {};\n                        leftOffset = drawRes.leftOffset || 0;\n                        topOffset = drawRes.topOffset || 0;\n                    }\n                });\n            });\n            resolve2();\n        })\n\n        all.push(p); \n        return all;\n    }\n\n    _drawWxmlInlineText (sub, leftOffset = 0, maxWidth) {\n        let text = sub.dataset.text || '';\n        if(sub.dataset.maxlength && text.length > sub.dataset.maxlength) {\n            text = text.substring(0, sub.dataset.maxlength) + '...';\n        }\n        \n        let textData = {\n            text,\n            originX: sub.left,\n            x: leftOffset ? leftOffset : sub.left,\n            y: sub.top,\n            progress: sub.progress,\n            leftOffset: leftOffset,\n            maxWidth: maxWidth // limit\n        }\n\n        if (sub.backgroundColor !== 'rgba(0, 0, 0, 0)') {\n            sub.background = sub.backgroundColor;\n        }else {\n            sub.background = 'rgba(0, 0, 0, 0)';\n        }\n\n        if(sub.dataset.background) {\n            sub.background = sub.dataset.background;\n        }\n\n        let res = this._drawText(textData, sub, null, null, 'inline-text', 'wxml');\n\n        return res\n    }\n\n    _drawWxmlText (sub, resolve, reject) {\n        let text = sub.dataset.text || '';\n        if(sub.dataset.maxlength && text.length > sub.dataset.maxlength) {\n            text = text.substring(0, sub.dataset.maxlength) + '...';\n        }\n        \n        let textData = {\n            text,\n            x: sub.left,\n            y: sub.top,\n            progress: sub.progress\n        }\n        if (sub.backgroundColor !== 'rgba(0, 0, 0, 0)') {\n            sub.background = sub.backgroundColor;\n        }else {\n            sub.background = 'rgba(0, 0, 0, 0)';\n        }\n\n        if(sub.dataset.background) {\n            sub.background = sub.dataset.background;\n        }\n\n        this._drawText(textData, sub, resolve, reject, 'text', 'wxml');\n    }\n\n    _drawWxmlImage (sub, resolve, reject) {\n        let imageData = {\n            url: sub.dataset.url,\n            x: sub.left,\n            y: sub.top,\n            progress: sub.progress\n        }\n\n        let res = this._drawRect(imageData, sub, resolve, reject, 'image', 'inline-wxml');\n\n        return res\n    }\n\n    _drawWxmlCircleImage (sub, resolve, reject) {\n        let imageData = {\n            url: sub.dataset.url,\n            x: sub.left,\n            y: sub.top,\n            progress: sub.progress\n        }\n        sub.r = sub.width / 2;\n\n        this._drawCircle(imageData, sub, resolve, reject, true, 'wxml');\n    }\n\n    _drawWxmlBackgroundImage (sub, resolve, reject) {\n        let url = sub.dataset.url;\n        let index = this._findPicIndex(url);\n        url = index > -1 ? this.allPic[index].local : url;\n        let size = sub.backgroundSize.replace(/px/g, '').split(' ');\n\n        let imageData = {\n            url: url,\n            x: sub.left,\n            y: sub.top,\n            progress: sub.progress\n        }\n\n        this._drawRect(imageData, sub, resolve, reject, 'image', 'wxml');\n    }\n\n    _getWxml (item, style) {\n        let self = this;\n        let query;\n        if(this.obj) {\n            query = wx.createSelectorQuery().in(this.obj);\n        }else {\n            query = wx.createSelectorQuery();\n        }\n\n        let p1 = new Promise((resolve, reject) => {\n            // \n            let count = 0;\n            query.selectAll(`${item.class}`).fields({\n                dataset: true,\n                size: true,\n                rect: true,\n                computedStyle: ['width', 'height', 'font', 'fontSize', 'fontFamily', 'fontWeight', 'fontStyle', 'textAlign', \n                    'color', 'lineHeight', 'border', 'borderColor', 'borderStyle', 'borderWidth',  'verticalAlign', 'boxShadow',\n                    'background', 'backgroundColor', 'backgroundImage', 'backgroundPosition', 'backgroundSize', 'paddingLeft', 'paddingTop',\n                    'paddingRight', 'paddingBottom'\n                    ]\n            }, (res) => {\n                if(count++ === 0) {\n                    let formated = self._formatImage(res);\n                    let list = formated.list;\n                    res = formated.res;\n\n                    self._preloadImage(list).then(result => {\n                        resolve(res);\n                    }).catch((res) => {\n                        reject && reject({ errcode: 1009, errmsg: 'drawWxml preLoadImage error' });\n                    });\n                }\n            }).exec();\n        });\n\n        let p2 = new Promise((resolve, reject) => {\n            if (!item.limit) {\n                resolve({ top: 0, width: self.width / self.zoom });\n            }\n\n            query.select(`${item.limit}`).fields({\n                dataset: true,\n                size: true,\n                rect: true,\n            }, (res) => {\n                resolve(res);\n            }).exec();\n        });\n\n        return Promise.all([p1, p2]);\n    }\n\n    _getLineHeight (style) {\n        let zoom = this.zoom;\n        if(style.dataset && style.dataset.type) {\n            zoom = 1;\n        }\n        let lineHeight;\n        if(!isNaN(style.lineHeight) && style.lineHeight > style.fontSize) {\n            lineHeight = style.lineHeight;\n        }else {\n            style.lineHeight = (style.lineHeight || '') + '';\n            lineHeight = +style.lineHeight.replace('px', '');\n            lineHeight = lineHeight ? lineHeight : (style.fontSize || 14) * 1.2;\n        }\n        return lineHeight * zoom;\n    }\n\n    _formatImage (res = []) {\n        let list = [];\n        res.forEach((item, index) => {\n            let dataset = item.dataset;\n            let uid = Util.getUid();\n            let filename = `${wx.env.USER_DATA_PATH}/${uid}.png`;\n            if ((dataset.type === \"image\" || dataset.type === \"radius-image\") && dataset.url) {\n                let sub = {\n                    url: dataset.base64 ? filename : dataset.url,\n                    isBase64: dataset.base64 ? dataset.url : false\n                }\n\n                res[index].dataset = Object.assign(res[index].dataset, sub);\n                list.push(sub)\n            } else if (dataset.type === 'background-image' && item.backgroundImage.indexOf('url') > -1) {\n                let url = item.backgroundImage.replace(/url\\((\\\"|\\')?/, '').replace(/(\\\"|\\')?\\)$/, '');\n                let sub = {\n                    url: dataset.base64 ? filename : url,\n                    isBase64: dataset.base64 ? url : false\n                }\n                res[index].dataset = Object.assign(res[index].dataset, sub);\n                list.push(sub)\n            }\n        });\n\n        return { list, res };\n    }\n\n    _updateProgress (distance) {\n        this.progressPercent += distance;\n        this.progress(this.progressPercent);\n    }\n\n    _sortListByTop (list = []) {\n        let sorted = {};\n\n        // 2px\n        list.forEach((item, index) => {\n            let top = item.top;\n            if (!sorted[top]) {\n                if (sorted[top - 2]) {\n                    top = top - 2;\n                }else if (sorted[top - 1]) {\n                    top = top - 1;\n                } else if (sorted[top + 1]) {\n                    top = top + 1;\n                } else if (sorted[top + 2]) {\n                    top = top + 2;\n                } else {\n                    sorted[top] = [];\n                }\n            }\n            sorted[top].push(item);\n        });\n\n        return sorted;\n    }\n\n    _parseNumber (number) {\n        return isNaN(number) ? +(number || '').replace('px', '') : number;\n    }\n\n    _transferWxmlStyle (sub, item, limitLeft, limitTop) {\n        let leftFix = (+sub.dataset.left || 0);\n        let topFix = (+sub.dataset.top || 0);\n\n        sub.width = this._parseNumber(sub.width);\n        sub.height = this._parseNumber(sub.height);\n        sub.left = this._parseNumber(sub.left) - limitLeft + (leftFix + (item.x || 0)) * this.zoom;\n        sub.top = this._parseNumber(sub.top) - limitTop + (topFix + (item.y || 0)) * this.zoom;\n\n        let padding = sub.dataset.padding || '0 0 0 0';\n        if (typeof padding === 'string') {\n            padding = Util.transferPadding(padding);\n        }\n        let paddingTop = Number(sub.paddingTop.replace('px', '')) + Number(padding[0]);\n        let paddingRight = Number(sub.paddingRight.replace('px', '')) + Number(padding[1]);\n        let paddingBottom = Number(sub.paddingBottom.replace('px', '')) + Number(padding[2]);\n        let paddingLeft = Number(sub.paddingLeft.replace('px', '')) + Number(padding[3]);\n        sub.padding = [paddingTop, paddingRight, paddingBottom, paddingLeft];\n        \n        return sub;\n    }\n\n    /**\n     * \n     * @param {*} item \n     * @param {*} style \n     */\n    _resetPositionX (item, style) {\n        let zoom = this.zoom;\n        let x = 0;\n\n        if(style.dataset && style.dataset.type) {\n            zoom = 1;\n        }\n\n        // wxml\n        if (item.x < 0 && item.type) {\n            x = this.width + item.x * zoom - style.width * zoom;\n        } else {\n            x = item.x * zoom;\n        }\n\n        if (parseInt(style.borderWidth)) {\n            x += parseInt(style.borderWidth)\n        }\n\n        return x + this.translateX;\n    }\n\n    /**\n     * \n     * @param {*} item \n     * @param {*} style \n     */\n    _resetPositionY (item, style, textHeight) {\n        let zoom = this.zoom;\n        let y = 0;\n\n        if(style.dataset && style.dataset.type) {\n            zoom = 1;\n        }\n\n        if (item.y < 0) {\n            y = this.height + item.y * zoom - (textHeight ? textHeight : style.height * zoom)\n        } else {\n            y = item.y * zoom;\n        }\n\n        if (parseInt(style.borderWidth)) {\n            y += parseInt(style.borderWidth)\n        }\n        \n        return y + this.translateY;\n    }\n\n    /**\n     * paddingtext-align\n     * @param {*} item \n     * @param {*} style \n     * @param {*} textWidth\n     */\n    _resetTextPositionX (item, style, textWidth, width) {\n        let textAlign = style.textAlign || 'left';\n        let x = item.x;\n        if (textAlign === 'center') {\n            x = (width - textWidth) / 2 + item.x;\n        } else if (textAlign === 'right') {\n            x = width - textWidth + item.x;\n        }\n\n        let left = style.padding ? (style.padding[3] || 0) : 0;\n\n        return x + left + this.translateX;\n    }\n\n    /**\n     * paddingtext-align\n     * @param {*} item \n     * @param {*} style \n     * @param {*} textWidth\n     */\n    _resetTextPositionY (item, style, lineNum = 0) {\n        let zoom = this.zoom;\n        if(style.dataset && style.dataset.type) {\n            zoom = 1;\n        }\n\n        let lineHeight = this._getLineHeight(style);\n        let fontSize = Math.ceil((style.fontSize || 14) * zoom)\n\n        let blockLineHeightFix = (style.dataset && style.dataset.type || '').indexOf('inline') > -1 ? 0 : (lineHeight - fontSize) / 2\n\n        let top = style.padding ? (style.padding[0] || 0) : 0;\n\n        // y + lineheight +  + paddingTop + \n        return item.y + blockLineHeightFix + lineNum * lineHeight + top + this.translateY;\n    }\n\n    /**\n     * \n     * @param {*} text \n     * @param {*} width \n     * @param {*} singleLength \n     * @param {*} currentIndex \n     * @param {*} widthOffset\n     */\n    _getTextSingleLine(text, width, singleLength, currentIndex = 0, widthOffset = 0) {\n        let offset = 0;\n        let endIndex = currentIndex + singleLength + offset;\n        let single = text.substring(currentIndex, endIndex);\n        let singleWidth = this.measureWidth(single);\n\n        while (Math.round(widthOffset + singleWidth) > width) {\n            offset--;\n            endIndex = currentIndex + singleLength + offset;\n            single = text.substring(currentIndex, endIndex);\n            singleWidth = this.measureWidth(single);\n        }\n\n        return {\n            endIndex, \n            single, \n            singleWidth\n        }\n    }\n\n    _drawBorder (border, style, callback) {\n        let zoom = this.zoom;\n        if(style.dataset && style.dataset.type) {\n            zoom = 1;\n        }\n        border = Util.transferBorder(border);\n\n        if (border && border.width) {\n            // \n            this._drawBoxShadow();\n            if (border) {\n                \n                this.ctx.setLineWidth(border.width * zoom);\n\n                if (border.style === 'dashed') {\n                    let dash = style.dash || [5, 5, 0];\n                    let offset =  dash[2] || 0;\n                    let array = [dash[0] || 5, dash[1] || 5];\n                    this.ctx.setLineDash(array, offset);\n                }\n                this.ctx.setStrokeStyle(border.color);\n            }\n            callback && callback(border);\n        }\n    }  \n\n    _drawBoxShadow (boxShadow, callback) {\n        boxShadow = Util.transferBoxShadow(boxShadow);\n        if (boxShadow) {\n            this.ctx.setShadow(boxShadow.offsetX, boxShadow.offsetY, boxShadow.blur, boxShadow.color);\n        }else {\n            this.ctx.setShadow(0, 0, 0, '#ffffff');\n        }\n\n        callback && callback(boxShadow || {});\n    }\n\n    _setFill (fill, callback) {\n        if(fill) {\n            if (typeof fill === 'string') {\n                this.ctx.setFillStyle(fill);\n            } else {\n                let line = fill.line;\n                let color = fill.color;\n                let grd = this.ctx.createLinearGradient(line[0], line[1], line[2], line[3]);\n                grd.addColorStop(0, color[0]);\n                grd.addColorStop(1, color[1]);\n                this.ctx.setFillStyle(grd);\n            }\n            callback && callback();\n        }\n    }\n\n    _setStroke (stroke, callback) {\n        if(stroke) {\n            if (typeof stroke === 'string') {\n                this.ctx.setStrokeStyle(stroke);\n            } else {\n                let line = stroke.line;\n                let color = stroke.color;\n                let grd = this.ctx.createLinearGradient(line[0], line[1], line[2], line[3]);\n                grd.addColorStop(0, color[0]);\n                grd.addColorStop(1, color[1]);\n                this.ctx.setStrokeStyle(grd);\n            }\n\n            callback && callback();\n        }\n    }\n}\n\nexport default Wxml2Canvas;","/**\n * fulltrue\n * @param {String} str \n * @param {Boolean} full \n */\n\nfunction getTextLength (str, full) {\n    let len = 0;\n    for (let i = 0; i < str.length; i++) {\n        let c = str.charCodeAt(i);\n        //1 \n        if ((c >= 0x0001 && c <= 0x007e) || (0xff60 <= c && c <= 0xff9f)) {\n            len++;\n        }\n        else {\n            len += (full ? 2 : 1);\n        }\n    }\n    return len;\n}\n\n/**\n * rgba(255, 255, 255, 1) => #ffffff\n * @param {String} color \n */\nfunction transferColor (color = '') {\n    let res = '#';\n    color = color.replace(/^rgba?\\(/, '').replace(/\\)$/, '');\n    color = color.split(', ');\n    \n    color.length > 3 ? color.length = 3 : '';\n    for(let item of color) {\n        item = parseInt(item || 0);\n        if(item < 10) {\n            res += ('0' + item)\n        }else {\n            res += (item.toString(16))\n        }\n    }\n\n    return res;\n}\n\nfunction transferBorder (border = '') {\n    let res = border.match(/(\\w+)px\\s(\\w+)\\s(.*)/);\n    let obj = {};\n\n    if(res) {\n         obj = {\n            width: +res[1],\n            style: res[2],\n            color: res[3]\n        }\n    }\n    \n    return res ? obj : null;\n}\n\n\n/**\n * \n * @param {*} padding \n */\nfunction transferPadding (padding = '0 0 0 0') {\n    padding = padding.split(' ');\n    for(let i = 0, len = padding.length; i < len; i++) {\n        padding[i] = +padding[i].replace('px', '');\n    }\n\n    return padding;\n}\n/**\n * type1: 0, 25, 17, rgba(0, 0, 0, 0.3)\n * type2: rgba(0, 0, 0, 0.3) 0px 25px 17px 0px => (0, 25, 17, rgba(0, 0, 0, 0.3))\n * @param {*} shadow \n */\nfunction transferBoxShadow(shadow = '', type) {\n    if(!shadow || shadow === 'none') return;\n    let color;\n    let split;\n\n    split = shadow.match(/(\\w+)\\s(\\w+)\\s(\\w+)\\s(rgb.*)/);\n\n    if (split) {\n        split.shift();\n        shadow = split;\n        color = split[3] || '#ffffff';\n    } else {\n        split = shadow.split(') ');\n        color = split[0] + ')'\n        shadow = split[1].split('px ');\n    }\n\n    return {\n        offsetX: +shadow[0] || 0,\n        offsetY: +shadow[1] || 0,\n        blur: +shadow[2] || 0,\n        color\n    }\n}\n\nfunction getUid(prefix) {\n    prefix = prefix || '';\n\n    return (\n        prefix +\n        'xxyxxyxx'.replace(/[xy]/g, c => {\n            let r = (Math.random() * 16) | 0;\n            let v = c === 'x' ? r : (r & 0x3) | 0x8;\n            return v.toString(16);\n        })\n    );\n}\n\nexport default {\n    getTextLength,\n    transferBorder,\n    transferColor,\n    transferPadding,\n    transferBoxShadow,\n    getUid\n}"],"sourceRoot":""}
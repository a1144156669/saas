{"version":3,"sources":["uni-app:///main.js","webpack:///E:/柏萱/项目管理/盼盼短剧/开源版本/vignette-video/pages/user/share/poster.vue?b667","webpack:///E:/柏萱/项目管理/盼盼短剧/开源版本/vignette-video/pages/user/share/poster.vue?05d0","webpack:///E:/柏萱/项目管理/盼盼短剧/开源版本/vignette-video/pages/user/share/poster.vue?8d89","webpack:///E:/柏萱/项目管理/盼盼短剧/开源版本/vignette-video/pages/user/share/poster.vue?eb10","uni-app:///pages/user/share/poster.vue","webpack:///E:/柏萱/项目管理/盼盼短剧/开源版本/vignette-video/pages/user/share/poster.vue?095f","webpack:///E:/柏萱/项目管理/盼盼短剧/开源版本/vignette-video/pages/user/share/poster.vue?21ef"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","data","posterBackground","backgroundColor","posterImg","canvasWidth","canvasHeight","qrcodeValue","posterQrcode","qrcodeDrawFinish","imageLoadFinish","UID","computed","watch","uid","onLoad","uni","title","mask","onReady","methods","initData","shareLink","loadImg","getWxmpQrcode","drawWxmpPoster","query","size","scrollOffset","height","createImage","clearTimeout","width","element","background","progress","finish","error","icon","list","type","class","limit","x","y","drawImage","qrcodeResult","img","turnBase64Image","src","success","then","catch","console","fail","receiveRenderData","_showLoading","_hideLoading","_errAlert","content"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,eAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2S;AAC3S;AAC0D;AACL;AACsC;;;AAG3F;AACwL;AACxL,gBAAgB,iLAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,yQAAM;AACR,EAAE,kRAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,6QAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA4sB,CAAgB,ooBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;ACwChuB;AAGA;AAOA;AAAA;AAAA;AAAA,eACA;EACAC,aAIA;EACAC;IACA;MAEAC;MAAA;MACAC;MAAA;;MAEAC;MAAA;MACAC;MAAA;MACAC;MAAA;;MAEAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;EACAC,0CACA,yCACA,yCACA;EACAC;IACAC;MACA;MACA;IACA;EACA;EACAC;IACAC;MACAC;MACAC;IACA;IAEA;EACA;EACAC,6BAEA;EACAC;IACA;IACAC;MAAA;MACA;MACA;MACA;MAGA;IAMA;IACA;IACAC,iCA4BA;IACA;IACAC;MACA;MACA;QACA;QAEA;MAEA;IACA;IACA;IACAC;MAAA;MACA;QACA;UACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;MACAC;QACAC;QACAC;MACA;QACA;UAAAC;QACA;QACA;QACA;UACAC;UACAC;QACA;MACA;MACA;MACA;QACA;QACA;UACAC;UACAH;UACAI;UACAC;UACAC;UACAC;YACA;YACA;cACApB;cACAe;YACA;UACA;UACAM;YACArB;cACAC;cACAqB;YACA;YACAtB;UACA;QACA;QACA;UACAuB,OACA;YACAC;YACAC;YAAA;YACAC;YAAA;YACAC;YACAC;UACA;QAEA;QACAC;MACA;IACA;IACA;IACAC;MACAC;IACA;IACA;IACAC;MAAA;MACAhC;QACAiC;QACAC;UACA,0CACAC;YACA;UACA,GACAC;YACAC;UACA;QACA;QACAC;UACAD;QACA;MACA;IACA;IACA;IACAE;MACA;MACA;IACA;IACA;IACAC;MACAxC;QACAC;MACA;IACA;IACA;IACAwC;MACAzC;IACA;IACA;IACA0C;MACA1C;QACAC;QACA0C;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACjQA;AAAA;AAAA;AAAA;AAAm2C,CAAgB,2pCAAG,EAAC,C;;;;;;;;;;;ACAv3C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/user/share/poster.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/user/share/poster.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./poster.vue?vue&type=template&id=4940e998&scoped=true&filter-modules=eyJjYW52YXNJbWFnZSI6eyJ0eXBlIjoicmVuZGVyanMiLCJjb250ZW50IjoiIiwic3RhcnQiOjY2NTIsImF0dHJzIjp7ImxhbmciOiJqcyIsIm1vZHVsZSI6ImNhbnZhc0ltYWdlIn0sImVuZCI6NzkxNX19&\"\nvar renderjs\nimport script from \"./poster.vue?vue&type=script&lang=js&\"\nexport * from \"./poster.vue?vue&type=script&lang=js&\"\nimport style0 from \"./poster.vue?vue&type=style&index=0&id=4940e998&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4940e998\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/user/share/poster.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./poster.vue?vue&type=template&id=4940e998&scoped=true&filter-modules=eyJjYW52YXNJbWFnZSI6eyJ0eXBlIjoicmVuZGVyanMiLCJjb250ZW50IjoiIiwic3RhcnQiOjY2NTIsImF0dHJzIjp7ImxhbmciOiJqcyIsIm1vZHVsZSI6ImNhbnZhc0ltYWdlIn0sImVuZCI6NzkxNX19&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./poster.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./poster.vue?vue&type=script&lang=js&\"","\n<template>\n\t<view class=\"page_content\">\n\t\t<view class=\"head_content\">\n\t\t\t<CustomNavbar title=\"邀请海报\"></CustomNavbar>\n\t\t</view>\n\t\t<view class=\"main_content\" :style=\"{ background: backgroundColor }\">\n\t\t\t<view class=\"poster share_canvas\" id=\"pagePoster\" :msg=\"qrcodeDrawFinish\" :change:msg=\"canvasImage.logicToView\">\n\t\t\t\t<img class=\"image draw_canvas\" :src=\"posterBackground\" mode=\"widthFix\" data-mode=\"widthFix\" data-type=\"image\" :data-url=\"posterBackground\" data-base64=\"1\" @load=\"loadImg('posterBackground')\"></img>\n\t\t\t\t<img class=\"qrcode draw_canvas\" :src=\"posterQrcode\" mode=\"aspectFill\" data-mode=\"aspectFill\" data-type=\"image\" :data-url=\"posterQrcode\" data-base64=\"1\" @load=\"loadImg('posterQrcode')\"></img>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"poster1\">\n\t\t\t\t<image class=\"preview_img\" :src=\"posterImg\" mode=\"widthFix\" show-menu-by-longpress></image>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- #ifdef MP-WEIXIN -->\n\t\t\t<canvas class=\"canvas_style\" canvas-id=\"wxCanvas\" :style=\"{ width: canvasWidth + 'px', height: canvasHeight + 'px' }\"></canvas>\n\t\t\t<!-- #endif -->\n\t\t\t\n\t\t\t<!-- #ifndef MP-WEIXIN -->\n\t\t\t<tki-qrcode ref=\"inviteQrcode\" cid=\"invite-qrcode\" :val=\"qrcodeValue\" :size=\"260\" :show=\"false\" :loadMake=\"true\" :showLoading=\"false\" @result=\"qrcodeResult\" />\n\t\t\t<canvas class=\"canvas_style\" canvas-id=\"myCanvas\" :style=\"{ width: canvasWidth + 'px', height: canvasHeight + 'px' }\"></canvas>\n\t\t\t<!-- #endif -->\n\t\t\t\n\t\t\t<view class=\"rule_box\">\n\t\t\t\t<view class=\"info\">\n\t\t\t\t\t<view class=\"title\">邀请说明</view>\n\t\t\t\t\t<view class=\"msg\">\n\t\t\t\t\t\t1、好友通过您分享的邀请海报注册登录后，Ta永久成为您的下级;  <br>\n\t\t\t\t\t\t2、如果您是分销商的话，未来Ta产生的订单您都获得佣金奖励，会自动计入您的账号中!!\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"button\">长按图片保存</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\timport { pathToBase64, base64ToPath } from 'image-tools'\n\n\t// #ifdef MP-WEIXIN\n\timport Wxml2Canvas from 'wxml2canvas';\n\t// #endif\n\t\n\t// #ifndef MP-WEIXIN\n\timport tkiQrcode from \"@/components/tki-qrcode/tki-qrcode.vue\"\n\t// #endif\n\t\n\timport { mapState, mapGetters, mapMutations, mapActions } from \"vuex\"\n\texport default {\n\t\tcomponents: {\n\t\t\t// #ifndef MP-WEIXIN\n\t\t\ttkiQrcode\n\t\t\t// #endif\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\n\t\t\t\tposterBackground: '', // 海报背景图片\n\t\t\t\tbackgroundColor: '', // 背景颜色\n\t\t\t\t\n\t\t\t\tposterImg: '', // 海报图片\n\t\t\t\tcanvasWidth: 0, // 画布宽度\n\t\t\t\tcanvasHeight: 0, // 画布高度\n\t\t\t\t\n\t\t\t\tqrcodeValue: '', // 二维码参数\n\t\t\t\tposterQrcode: '', // 二维码图片\n\t\t\t\tqrcodeDrawFinish: false, // 二维码绘制完成\n\t\t\t\timageLoadFinish: [], // 已加载图片数组\n\t\t\t\tUID: this.$store.state.user.uid || 0,\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\t...mapGetters('user', [\"uid\"]),\n\t\t\t...mapGetters('app', [\"config\"]),\n\t\t},\n\t\twatch: {\n\t\t\tuid(newValue, oldValue) {\n\t\t\t\tthis.UID = newValue\n\t\t\t\tthis.shareLink()\n\t\t\t}\n\t\t},\n\t\tonLoad() {\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '加载中...',\n\t\t\t\tmask: true\n\t\t\t})\n\t\t\t\n\t\t\tthis.initData()\n\t\t},\n\t\tonReady() {\n\t\t\t\n\t\t},\n\t\tmethods: {\n\t\t\t// 初始化数据\n\t\t\tinitData() {\n\t\t\t\tconst bgimg = this.config?.share?.user_poster_bg || '/pages/user/static/poster.png'\n\t\t\t\tthis.backgroundColor = this.config?.share?.user_poster_bg_color\n\t\t\t\tthis.turnBase64Image(bgimg, 'posterBackground')\n\t\t\t\t\n\t\t\t\t// #ifdef MP-WEIXIN\n\t\t\t\tthis.getWxmpQrcode()\n\t\t\t\t// #endif\n\t\t\t\t\n\t\t\t\t// #ifndef MP-WEIXIN\n\t\t\t\tthis.shareLink()\n\t\t\t\t// #endif\n\t\t\t},\n\t\t\t// 分享链接\n\t\t\tshareLink() {\n\t\t\t\t// #ifndef MP-WEIXIN\n\t\t\t\t\n\t\t\t\t// #endif\n\t\t\t\t\n\t\t\t\t// #ifdef H5\n\t\t\t\tif(this.UID) {\n\t\t\t\t\tlet spm = ''\n\t\t\t\t\tif(this.$utils.platforms() == 'H5') {\n\t\t\t\t\t\tspm = this.UID + '.1.0.1.2'\n\t\t\t\t\t} else if(this.$utils.platforms() == 'wxOfficialAccount') {\n\t\t\t\t\t\tspm = this.UID + '.1.0.2.2'\n\t\t\t\t\t}\n\t\t\t\t\tthis.qrcodeValue = window.location.origin + window.location.pathname + `?${this.$SIGN}#/pages/home/index?scene=${spm}`\n\t\t\t\t}\n\t\t\t\t// #endif\n\t\t\t\t\n\t\t\t\t// #ifdef APP-PLUS\n\t\t\t\tif(this.UID) {\n\t\t\t\t\tlet spm = ''\n\t\t\t\t\tif(this.$utils.platforms() == 'H5') {\n\t\t\t\t\t\tspm = this.UID + '.1.0.1.2'\n\t\t\t\t\t} else if(this.$utils.platforms() == 'wxOfficialAccount') {\n\t\t\t\t\t\tspm = this.UID + '.1.0.2.2'\n\t\t\t\t\t}\n\t\t\t\t\tthis.qrcodeValue = '12346' + `?${this.$SIGN}#/pages/home/index?scene=${spm}`\n\t\t\t\t}\n\t\t\t\t// #endif\n\t\t\t},\n\t\t\t// 图片加载完成\n\t\t\tloadImg(id) {\n\t\t\t\tthis.imageLoadFinish.push(id)\n\t\t\t\tif(this.imageLoadFinish.length === 2) {\n\t\t\t\t\tthis.qrcodeDrawFinish = true\n\t\t\t\t\t// #ifdef MP-WEIXIN\n\t\t\t\t\tthis.drawWxmpPoster()\n\t\t\t\t\t// #endif\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 获取微信小程序二维码\n\t\t\tgetWxmpQrcode() {\n\t\t\t\tthis.$request('common.wxmpQrcode').then(res => {\n\t\t\t\t\tif(res.code === 1) {\n\t\t\t\t\t\tthis.turnBase64Image(res.data.qrcode, 'posterQrcode')\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t// 绘制微信小程序海报\n\t\t\tdrawWxmpPoster() {\n\t\t\t\t// 设置canvas宽高\n\t\t\t\tconst query = wx.createSelectorQuery().in(this);\n\t\t\t\tquery.select('#pagePoster').fields({\n\t\t\t\t\tsize: true,\n\t\t\t\t\tscrollOffset: true\n\t\t\t\t}, data => {\n\t\t\t\t\tconst { width, height } = data\n\t\t\t\t\tthis.canvasWidth = width\n\t\t\t\t\tthis.canvasHeight = height\n\t\t\t\t\tconst timer = setTimeout(() => {\n\t\t\t\t\t\tcreateImage(width, height)\n\t\t\t\t\t\tclearTimeout(timer)\n\t\t\t\t\t}, 500)\n\t\t\t\t}).exec();\n\t\t\t\t// 生成图片\n\t\t\t\tconst createImage = (width, height) => {\n\t\t\t\t\t// 设置宽高 * 2，否则图片位置错乱\n\t\t\t\t\tconst drawImage = new Wxml2Canvas({\n\t\t\t\t\t\twidth: width * 2,\n\t\t\t\t\t\theight: height * 2,\n\t\t\t\t\t\telement: 'wxCanvas',\n\t\t\t\t\t\tbackground: '#f0f0f0',\n\t\t\t\t\t\tprogress: percent => {},\n\t\t\t\t\t\tfinish: url => {\n\t\t\t\t\t\t\tthis.posterImg = url\n\t\t\t\t\t\t\tconst timer = setTimeout(() => {\n\t\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t\tclearTimeout(timer)\n\t\t\t\t\t\t\t}, 500)\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: error => {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '海报生成失败!',\n\t\t\t\t\t\t\t\ticon: 'error'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tconst data = {\n\t\t\t\t\t\tlist: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'wxml',\n\t\t\t\t\t\t\t\tclass: '.share_canvas .draw_canvas', // draw_canvas指定待绘制的元素\n\t\t\t\t\t\t\t\tlimit: '.share_canvas', // 限定绘制元素的范围，取指定元素与它的相对位置\n\t\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\t\ty: 0\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t\tdrawImage.draw(data);\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 获取微信公众号二维码\n\t\t\tqrcodeResult(img) {\n\t\t\t\timg && this.turnBase64Image(img, 'posterQrcode')\n\t\t\t},\n\t\t\t// 将图片转为base64位url\n\t\t\tturnBase64Image(img, key) {\n\t\t\t\tuni.getImageInfo({\n\t\t\t\t\tsrc: img,\n\t\t\t\t\tsuccess: image => {\n\t\t\t\t\t\tpathToBase64(image.path)\n\t\t\t\t\t\t\t.then(base64 => {\n\t\t\t\t\t\t\t\tthis[key] = base64;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(error => {\n\t\t\t\t\t\t\t\tconsole.log('转换失败：', error);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tfail: err => {\n\t\t\t\t\t\tconsole.log('将本地图片转为base 64报错:', err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 获取生成的base64图片路径\n\t\t\treceiveRenderData(val) {\n\t\t\t\tconst url = val.replace(/[\\r\\n]/g, ''); // 去除base64位中的空格\n\t\t\t\tthis.posterImg = url\n\t\t\t},\n\t\t\t// 显示loading\n\t\t\t_showLoading(str) {\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: str\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 隐藏loading\n\t\t\t_hideLoading() {\n\t\t\t\tuni.hideLoading();\n\t\t\t},\n\t\t\t// 报错alert\n\t\t\t_errAlert(content) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: content\n\t\t\t\t});\n\t\t\t},\n\t\t}\n\t}\n</script>\n<script lang=\"renderjs\" module=\"canvasImage\">\n\timport html2canvas from 'html2canvas'\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tisCanDraw: true\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\t// 生成图片需要调用的方法\n\t\t\tgenerateImage() {\n\t\t\t\tconst ownerFun = this.$ownerInstance\n\t\t\t\townerFun.callMethod('_showLoading', '正在生成图片') // 生成图片的 loading 提示\n\t\t\t\tconst timer = setTimeout(() => {\n\t\t\t\t\tconst dom = document.getElementById('pagePoster') // 需要生成图片内容的 dom 节点\n\t\t\t\t\thtml2canvas(dom, {\n\t\t\t\t\t\twidth: dom.clientWidth, //dom 原始宽度\n\t\t\t\t\t\theight: dom.clientHeight - 6,\n\t\t\t\t\t\tscrollY: 0, // html2canvas默认绘制视图内的页面，需要把scrollY，scrollX设置为0\n\t\t\t\t\t\tscrollX: 0,\n\t\t\t\t\t\tuseCORS: true, //支持跨域\n\t\t\t\t\t\tscale: 3, // 设置生成图片的像素比例，默认是1，如果生成的图片模糊的话可以开启该配置项\n\t\t\t\t\t}).then(canvas => {\n\t\t\t\t\t\t// 生成成功, html2canvas 生成成功的图片链接需要转成 base64位的url\n\t\t\t\t\t\townerFun.callMethod('receiveRenderData', canvas.toDataURL('image/png'))\n\t\t\t\t\t\t// 关闭加载提示框\n\t\t\t\t\t\townerFun.callMethod('_hideLoading')\n\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t// 生成失败 弹出提示弹窗\n\t\t\t\t\t\townerFun.callMethod('_errAlert', `【生成图片失败，请重试】${err}`)\n\t\t\t\t\t\t// 关闭加载提示框\n\t\t\t\t\t\townerFun.callMethod('_hideLoading')\n\t\t\t\t\t})\n\t\t\t\t\tclearTimeout(timer)\n\t\t\t\t}, 300)\n\t\t\t},\n\t\t\t// 接收逻辑层信息\n\t\t\tlogicToView(newValue, oldValue) {\n\t\t\t\tif(newValue === true && this.isCanDraw === true) {\n\t\t\t\t\tthis.isCanDraw = false\n\t\t\t\t\tthis.generateImage()\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\n\t.page_content {\n\t\t.main_content {\n\t\t\tflex: auto;\n\t\t\toverflow-y: auto;\n\t\t\tbackground: #6A62D1;\n\t\t\tposition: relative;\n\t\t\tpadding-bottom: 60rpx;\n\n\t\t\t.poster {\n\t\t\t\tposition: relative;\n\t\t\t\t\n\t\t\t\t.image {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t}\n\n\t\t\t\t.qrcode {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tbottom: 108rpx;\n\t\t\t\t\tleft: 66rpx;\n\t\t\t\t\twidth: 140rpx;\n\t\t\t\t\theight: 140rpx;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.poster1 {\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\tz-index: 1;\n\t\t\t\twidth: 100%;\n\n\t\t\t\t.preview_img {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.rule_box {\n\t\t\t\tpadding: 0 36rpx;\n\n\t\t\t\t.info {\n\t\t\t\t\tborder: 4rpx solid #000;\n\t\t\t\t\tpadding: 20rpx 30rpx;\n\t\t\t\t\tbackground: #fff;\n\t\t\t\t\tcolor: #000;\n\t\t\t\t\t\n\t\t\t\t\t.title {\n\t\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\t\tmargin-bottom: 10rpx;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.msg {\n\t\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\t\tline-height: 40rpx;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.button {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 80rpx;\n\t\t\t\t\tline-height: 80rpx;\n\t\t\t\t\tcolor: #fff;\n\t\t\t\t\tfont-size: 32rpx;\n\t\t\t\t\tbackground: #DF9B45;\n\t\t\t\t\tborder-radius: 16rpx;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tmargin-top: -24rpx;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.canvas_style {\n\t\t\t\tposition: fixed;\n\t\t\t\ttop: -999999999rpx;\n\t\t\t\tleft: 0;\n\t\t\t}\n\t\t}\n\t}\n</style>","import mod from \"-!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./poster.vue?vue&type=style&index=0&id=4940e998&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./poster.vue?vue&type=style&index=0&id=4940e998&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1733898051446\n      var cssReload = require(\"E:/软件下载/Hbx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}